<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hero Big Text – Char Reveal</title>

  <style>
    :root{
      --ease-out: cubic-bezier(.16,1,.3,1);
    }

    *{
      box-sizing:border-box;
    }

    body{
      margin:0;
      min-height:200vh;
      background:#0b0b0b;
      color:#ffffff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* ---------------- HERO LAYOUT ---------------- */
    .wrap{
      width:92vw;
      max-width:1800px;
      padding-top:22vh;
      margin:0 auto;
    }

    /* ---------------- TEXT STYLES ---------------- */
    .o-anim-text{
      overflow:hidden;
      line-height:1;
      font-size: clamp(120px, 18vw, 320px);
      font-weight: 600;
      letter-spacing: -0.05em;
      line-height: 0.9;
      margin: 0;
    }

    .c-heading.-h1 h1{
      font-size: clamp(120px, 18vw, 320px);
      font-weight: 600;
      letter-spacing: -0.05em;
      line-height: 0.9;
      margin: 0;
    }

    /* Screen-reader text */
    .u-screen-reader-text{
      position:absolute;
      width:1px;
      height:1px;
      padding:0;
      margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;
      border:0;
    }

    .o-anim-text_inner{
      display:inline-block;
    }

    .o-anim-text_word{
      display:inline-block;
      white-space:nowrap;
    }

    .o-anim-text_char{
      display:inline-block;
      position:relative;
      padding-right:0.02em;

      transform: translateY(140%);
      opacity: 0;
      filter: blur(8px);
      will-change: transform, opacity, filter;
    }

    .o-anim-text.is-inview .o-anim-text_char{
      transform: translateY(0%);
      opacity:1;
      filter: blur(0);
      transition:
        transform 900ms var(--ease-out),
        opacity 900ms var(--ease-out),
        filter 900ms var(--ease-out);
    }

    /* Mobile refinement */
    @media (max-width: 768px){
      .c-heading.-h1 h1{
        font-size: clamp(72px, 22vw, 140px);
        line-height: 0.95;
      }
    }
  </style>
</head>

<body>

  <div class="wrap">

    <div data-project-header="title">
      <div
        class="o-anim-text c-heading -h1 -chars"
        data-module-anim-text="m4"
        data-anim-text-type="chars"
      >
        <h1 class="u-screen-reader-text">Belle-Mère</h1>
        <div class="o-anim-text_inner" data-anim-text="inner"></div>
      </div>
    </div>

  </div>

  <script>
    /* ---------------- CONFIG ---------------- */
    const CONFIG = {
      yFrom: 140,
      duration: 900,
      baseDelay: 18,
      blurFrom: 8,
      threshold: 0.4
    };

    function shuffle(array){
      for(let i = array.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function buildAnimText(el, text){
      const inner = el.querySelector('[data-anim-text="inner"]');
      inner.innerHTML = '';

      const chars = [];
      const words = text.split(' ');

      words.forEach((word, wIndex) => {
        const wordEl = document.createElement('div');
        wordEl.className = 'o-anim-text_word';

        [...word].forEach(char => {
          const span = document.createElement('div');
          span.className = 'o-anim-text_char';
          span.textContent = char;
          wordEl.appendChild(span);
          chars.push(span);
        });

        inner.appendChild(wordEl);

        if(wIndex !== words.length - 1){
          inner.appendChild(document.createTextNode(' '));
        }
      });

      const order = shuffle([...Array(chars.length)].map((_, i) => i + 1));
      chars.forEach((char, i) => {
        char.style.setProperty('--anim-text-char-index', order[i]);
        char.style.transform = `translateY(${CONFIG.yFrom}%)`;
        char.style.filter = `blur(${CONFIG.blurFrom}px)`;
      });

      el.__chars = chars;
    }

    function animateIn(el){
      el.classList.add('is-inview');

      el.__chars.forEach(char => {
        const idx = parseInt(char.style.getPropertyValue('--anim-text-char-index'), 10);
        const delay = idx * CONFIG.baseDelay;

        char.style.transition =
          `transform ${CONFIG.duration}ms cubic-bezier(.16,1,.3,1) ${delay}ms,
           opacity ${CONFIG.duration}ms cubic-bezier(.16,1,.3,1) ${delay}ms,
           filter ${CONFIG.duration}ms cubic-bezier(.16,1,.3,1) ${delay}ms`;

        requestAnimationFrame(() => {
          char.style.transform = 'translateY(0%)';
          char.style.opacity = '1';
          char.style.filter = 'blur(0)';
        });
      });
    }

    function init(){
      const el = document.querySelector('[data-module-anim-text="m4"]');
      buildAnimText(el, 'Belle-Mère');

      const io = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            animateIn(el);
            io.disconnect();
          }
        });
      }, { threshold: CONFIG.threshold });

      io.observe(el);
    }

    init();
  </script>

</body>
</html>
