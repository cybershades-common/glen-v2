<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GSAP Gradient Preloader</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            overflow-y: scroll;
        }

        body {
            width: 100%;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        body.loaded {
            overflow: visible;
        }

        /* Preloader container - gradient layer */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            visibility: hidden;
        }

        /* Gradient blob */
        #gradient-blob {
            width: 93.5rem;
            height: 93.5rem;
            max-width: 200vw;
            max-height: 200vw;
            min-width: 100vw;
            min-height: 100vw;
            border-radius: 93.5rem;
            background: radial-gradient(50% 50% at 50% 50%, #FFF1B0 0%, #FFDD39 35.58%, #FFAAA5 66.35%, #DB574E 100%);
            filter: blur(160.76539611816406px);
            -webkit-backface-visibility: hidden;
            -moz-backface-visibility: hidden;
            backface-visibility: hidden;
            -webkit-transform-style: preserve-3d;
            -moz-transform-style: preserve-3d;
            transform-style: preserve-3d;
            will-change: transform;
        }

        /* Mobile optimization */
        @media (max-width: 768px) {
            #gradient-blob {
                width: 150vw;
                height: 150vw;
                filter: blur(80px);
            }
        }

        @media (max-width: 480px) {
            #gradient-blob {
                width: 180vw;
                height: 180vw;
                filter: blur(60px);
            }
        }

        /* White curtain for unveil animation */
        #unveil-curtain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            z-index: 10000;
            transform-origin: bottom;
            opacity: 0;
            pointer-events: none;
        }

        /* Page content */
        #content {
            visibility: visible;
            min-height: 100vh;
            padding: 4rem 2rem;
        }

        /* Demo content styling */
        .hero {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .hero h1 {
            font-size: 4rem;
            margin-bottom: 2rem;
            background: linear-gradient(45deg, #DB574E, #FFDD39);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 3rem;
            line-height: 1.8;
        }

        .section {
            max-width: 1200px;
            margin: 4rem auto;
            padding: 2rem;
            background: #f9f9f9;
            border-radius: 1rem;
        }

        .section h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #DB574E;
        }

        .section p {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #666;
        }

        /* Logo styling */
        .logo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10001;
            width: 33vw;
            height: auto;
            will-change: opacity;
            -webkit-backface-visibility: hidden;
            -moz-backface-visibility: hidden;
            backface-visibility: hidden;
            pointer-events: none;
        }

        .logo object,
        .logo img {
            width: 100%;
            height: auto;
            display: block;
        }
    </style>
</head>
<body>
    <!-- Gradient Layer (stays in place, fades out) -->
    <div id="preloader">
        <div id="gradient-blob"></div>
    </div>

    <!-- Logo - separate from preloader to avoid transform conflicts -->
    <div class="logo">
        <object data="https://www.glenaeon.nsw.edu.au/static/images/logo.svg" type="image/svg+xml">
            <img alt="" src="https://www.glenaeon.nsw.edu.au/static/images/logo.png">
        </object>
    </div>

    <!-- Unveil Curtain (separate layer on top, slides up)
    <div id="unveil-curtain"></div> -->

    <!-- Page Content -->
    <div id="content">
        <div class="hero">
            <h1>Welcome!</h1>
            <p>This page features a beautiful gradient preloader animation built with GSAP</p>
        </div>

        <div class="section">
            <h2>Smooth Animations</h2>
            <p>The gradient blob rises from below the screen with a power4.out easing, then unveils the content with a white curtain animation from bottom to top.</p>
        </div>

        <div class="section">
            <h2>Performance Optimized</h2>
            <p>The animation waits for both the rise animation to complete AND the page to fully load before starting the unveil sequence.</p>
        </div>

        <div class="section">
            <h2>Scroll for More</h2>
            <p>After the preloader completes, scrolling is enabled and the content becomes visible. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        </div>

        <div class="section">
            <h2>Additional Content</h2>
            <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
        </div>
    </div>

    <!-- GSAP 3 from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

    <script>
        // Track animation and loading states
        let riseAnimationComplete = false;
        let pageLoaded = false;

        // Function to check if both conditions are met
        function checkAndUnveil() {
            if (riseAnimationComplete && pageLoaded) {
                startUnveilAnimation();
            }
        }

        // Set initial state - hide preloader and position gradient below screen
        gsap.set('#preloader', {
            visibility: 'visible'
        });

        gsap.set('#gradient-blob', {
            yPercent: 110
        });

        // Set logo initial opacity to 0
        gsap.set('.logo', {
            opacity: 0
        });

        // Rise animation - starts IMMEDIATELY when page loads
        gsap.to('#gradient-blob', {
            yPercent: 40,
            scale: 1,
            duration: 2.5,
            ease: 'none',
            onComplete: function() {
                riseAnimationComplete = true;
                checkAndUnveil();
            }
        });

        // Fade in logo while gradient rises
        gsap.to('.logo', {
            opacity: 1,
            duration: 2,
            ease: 'none',
            delay: 0
        });

        // Listen for window load event
        window.addEventListener('load', function() {
            pageLoaded = true;
            checkAndUnveil();
        });

        // Unveil animation function
        function startUnveilAnimation() {
            const tl = gsap.timeline({
                onComplete: function() {
                    // Enable scrolling
                    document.body.classList.add('loaded');

                    // Remove preloader and logo from DOM after animation
                    document.getElementById('preloader').style.display = 'none';
                    document.querySelector('.logo').style.display = 'none';
                }
            });

            // Fade out logo with blur
            tl.to('.logo', {
                opacity: 1,
               filter: 'blur(200px)',
                duration: 1.4,
                ease: 'power1.in'
            }, 0);

            // Circular expansion animation - gradient blob expands from bottom
            tl.to('#gradient-blob', {
                scale: 5,
                yPercent: 10,
                duration: 2,
                ease: 'power4.inOut'
            }, 0);

            // Fade out the entire preloader as it expands with blur
            tl.to('#preloader', {
                opacity: 0,
                filter: 'blur(300px)',
                duration: .8,
                ease: 'power2.inOut'
            }, 0.5);
        }
    </script>
</body>
</html>
